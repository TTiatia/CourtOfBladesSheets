---
import PCAttribute from "../Box/Box_PCAttribute.astro";
import VisibilityControl from "../Visibility/Visibility_Control.astro";

const {
    id, 
    classes, 
    categoryCount,
    skillPerCategory,
    categoryNameAttr,
    categoryValueAttr,
    categoryTooltipAttr,
    categoryXPCount,
    skillNameAttr,
    skillValueAttr,
    skillTooltipAttr,
    maxSkillCount
} = Astro.props;

function toArray(arg) { return Array.from(Array(arg), (x, i) => i + 1); }
---
<div id={id} class={classes}>
    <VisibilityControl attr={`setting_attrcount`}></VisibilityControl>
    {toArray(categoryCount).map((catNum) => (
        <>
            <PCAttribute 
                catNum={catNum} 
                skillPerCategory={skillPerCategory}
                categoryNameAttr={`${categoryNameAttr}${catNum}`}
                categoryValueAttr={`${categoryValueAttr}${catNum}`}
                categoryTooltipAttr={`${categoryTooltipAttr}${catNum}`}
                categoryXPCount={categoryXPCount}
                skillNameAttr={`${skillNameAttr}${catNum}`}
                skillValueAttr={`${skillValueAttr}${catNum}`}
                skillTooltipAttr={`${skillTooltipAttr}${catNum}`}
                maxSkillCount={maxSkillCount}
                classes={`visibility-gte-${catNum}`}>
            </PCAttribute>
        </>
    ))}
</div>
